<!-- views/pages/bulk/bulk-all.ejs -->

<div class="card shadow-sm mb-4">
  <div class="card-header">
    <h1 class="h3 mb-1">BULK â€¢ OVERVIEW</h1>
  </div>

  <div class="card-body">

    <style>
      .bulk-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 10px;
      }

      .bulk-table thead tr {
        background: #f7f7f7;
      }

      .bulk-table th,
      .bulk-table td {
        padding: 7px 8px;
        border-bottom: 1px solid #e6e6e6;
        white-space: nowrap;
        text-align: left !important;
      }

      .bulk-table td.num {
        text-align: left !important;
      }

      /* DELETE BUTTON STYLE (same as RAW overview) */
      .btn-delete {
        padding: 4px 10px;
        border-radius: 999px;
        border: 1px solid #b71c1c;
        background: #ffffff;
        color: #b71c1c;
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        cursor: pointer;
      }

      .btn-delete:hover {
        background: #b71c1c;
        color: #ffffff;
      }
    </style>

    <% if (error) { %>
      <div class="alert alert-danger"><%= error %></div>
    <% } %>

    <% if (!deliveries || !deliveries.length) { %>

      <p class="text-muted mb-0">No data yet.</p>

    <% } else { %>

      <div style="overflow:auto;">
        <table class="bulk-table">
          <thead>
            <tr>
              <th>DATE</th>
              <th>TIME</th>
              <th>SILO</th>
              <th>WEIGHT</th>
              <th>CUSTOMER</th>
              <th>CMR</th>
              <th>PURCHASE ORDER</th>
              <th>DELIVERY NOTE</th>
              <th>DELETE</th>
            </tr>
          </thead>

          <tbody>
            <% deliveries.forEach(function(d) { %>
              <tr>
                <td><%= d.date_label %></td>
                <td><%= d.time_label %></td>
                <td><%= d.silo %></td>
                <td class="num"><%= d.kg %></td>
                <td><%= d.customer %></td>
                <td><%= d.cmr || '' %></td>
                <td><%= d.purchase_order || '' %></td>
                <td><%= d.delivery_note || '' %></td>

                <!-- DELETE BUTTON -->
                <td>
                  <form method="POST"
                        action="/bulk/delete/<%= d.id %>"
                        onsubmit="return confirm('Delete this line?');">

                    <button type="submit" class="btn-delete">
                      DELETE
                    </button>

                  </form>
                </td>

              </tr>
            <% }); %>
          </tbody>
        </table>
      </div>

    <% } %>

  </div>
</div>
